Chapter-4.2 - Understanding hibernate.cfg.xml And hbm.xml file(Part-2)

================================================================================================================================================

üü¶ hibernate.cfg.xml?
    * hibernate.cfg.xml is the Hibernate‚Äôs main settings file or configuration file.
    * It is usually placed inside: src/main/resources/
    * Hibernate loads hibernate.cfg.xml automatically.
    * It defines
	   ‚Ä¢	How to connect to the database
	   ‚Ä¢	Which SQL dialect to use
	   ‚Ä¢	Where mapping files (hbm.xml) are located
	   ‚Ä¢	Optional settings (show SQL, format SQL, etc.)

üîµ 1. Database Connection Settings

These properties tell Hibernate how to connect to your database.

<property name="hibernate.connection.url">jdbc:mysql://localhost:3306/mydb</property>
<property name="hibernate.connection.username">root</property>
<property name="hibernate.connection.password">root</property>

üîµ 2. Hibernate Dialect

<property name="hibernate.dialect">org.hibernate.dialect.MySQL8Dialect</property>

* This defines which SQL version to generate be generated by Hibernate (MySQL, Oracle, PostgreSQL, etc.).

üîµ 3. Logging SQL Queries

<property name="hibernate.show_sql">true</property>
This prints SQL queries in the console.

üîµ 4. Table Creation Setting

<property name="hibernate.hbm2ddl.auto">update</property>
* It controls table creation:

  create      :	Creates tables every time (deletes old data)

  update      :	Updates tables, keeps old data (most commonly used)

  validate    :	Checks if tables match your entities

  create-drop :	Creates tables, drops on exit


üîµ 5. Mapping Resources

<mapping resource="Student.hbm.xml"/>

This tells Hibernate to load the mapping configuration from your hbm.xml.

If you have multiple entities:
<mapping resource="Employee.hbm.xml"/>
<mapping resource="Department.hbm.xml"/>

================================================================================================================================================

hbm.xml
-------------------------------------------------

üü¶ What is an hbm.xml File?

In Hibernate, hbm.xml file is a mapping file that tells Hibernate
how your Java classes are linked to your database tables.

it is like a translator between Java objects and database rows.

Hibernate can work with annotations (@Entity, @Table, etc.), but before annotations were popular, hbm.xml files were the standard way to configure mappings.

-------------------------------------------------

üü© Why do we need hbm.xml?

Because Hibernate needs to know:
	‚Ä¢	Which Java class represents which table
	‚Ä¢	Which class variable (field) maps to which column
	‚Ä¢	What is the primary key
	‚Ä¢	How relationships work
(One-to-one, one-to-many, many-to-many)
	‚Ä¢	Lazy/eager loading details
	‚Ä¢	Cascade operations (save, update, delete behavior)

-------------------------------------------------
Structure of an hbm.xml File

A typical Hibernate mapping file looks like this:

<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>

    <class name="com.example.Student" table="student">

        <id name="id" column="student_id">
            <generator class="increment"/>
        </id>

        <property name="name" column="student_name"/>
        <property name="age" column="student_age"/>

    </class>

</hibernate-mapping>

-------------------------------------------------
Understanding XML Tag of hbm.xml File

    <hibernate-mapping> : It is Root tage and tells Hibernate this is a mapping file

    <class>	            : Maps a class to a table ‚ÄúGiven class is stored table‚Äù
                          name :	Java class name	Your Java class
                          table :	Table name	DB table name

    <id>	            : Primary key mapping Which field is the primary key

    <property>	        : Field mapping	Normal fields ‚Üí columns

    <generator>	        : ID generation strategy

-------------------------------------------------
Simple Example (Java + hbm.xml)

public class Student {
    private int id;
    private String name;
    private int age;

    // getters and setters
}

Mapping File: Student.hbm.xml

<hibernate-mapping>
    <class name="Student" table="student">
        <id name="id" column="id">
            <generator class="identity"/>
        </id>
        <property name="name" column="name"/>
        <property name="age" column="age"/>
    </class>
</hibernate-mapping>

This tells Hibernate:
	‚Ä¢	Student class ‚Üí student table
	‚Ä¢	id field ‚Üí id column (primary key)
	‚Ä¢	name field ‚Üí name column
	‚Ä¢	age field ‚Üí age column


  Where is the hbm.xml file used?
  * It is  mentioned in hibernate.cfg.xml with <mapping> tag.
  ex : <mapping resource="Student.hbm.xml"/>

  * Hibernate then reads this file and understands how to store/retrieve data.

  Advantages of hbm.xml
	‚Ä¢	Easy to read and understand
	‚Ä¢	No cluttering of Java code with annotations
	‚Ä¢	Can change mappings without recompiling code
	‚Ä¢	Useful for legacy applications

  Disadvantages
	‚Ä¢	More typing ‚Üí more XML
	‚Ä¢	Harder to maintain compared to annotations
	‚Ä¢	Modern applications rarely use XML mapping

================================================================================================================

Interview Questions

1. What is hibernate.cfg.xml and why do we need it in a Hibernate application?

2. What kind of information do we store inside hibernate.cfg.xml?
   Give at least three examples.

3. What is the purpose of the hibernate.dialect property in Hibernate?

4. What does the hibernate.hbm2ddl.auto property do?
   Explain different modes like create, update, validate, and create-drop.

5. How do you enable SQL query logging in Hibernate using the configuration file?

6. What is the role of <mapping resource="Student.hbm.xml"/> inside the configuration file?

7. What is an hbm.xml file, and what problem does it solve in Hibernate?

8. Explain the purpose of the <class>, <id>, and <property> tags inside an hbm.xml file.

9. What is the difference between annotation-based mapping and XML-based mapping in Hibernate?
   When would you prefer XML mapping?

10. How does Hibernate use the hbm.xml file during runtime to store and retrieve data from the database?
